<!DOCTYPE html>
<html>

<head>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Kanit:wght@100&family=Parisienne&family=Playfair+Display&family=Roboto:wght@100;400&display=swap" rel="stylesheet">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
</head>

<body onload="checkUser()">
    <header>
        <img src="logo.png" alt="Logo" class="logo">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="wedding.html">Wedding TodoList</a></li>
            <li><a href="rsvp.html">Rsvp</a></li>
            <li><a href="signup.html">Sign Up /Login</a></li>
        </ul>
    </header>
<div id="form">
    <form id="loginForm">
        <label>
            <input class="email"type="email" id="email" placeholder="Email">
        </label>
        <label><br>
            <input class="password"type="password" id="password" placeholder="Password">
        </label>
        <button type="button" onclick="signIn()">Login</button> 
    </form>

    <form id="registerForm">
        <label>
            <br><input class="email1" type="email" id="registerEmail" placeholder="Email"><br>
        </label>
        <label>
            <input class="password1" type="password" id="registerPassword" placeholder="Password">
        </label>
        <button type="button" onclick="register()">Register</button>
    </form>

    <div id="userInfo" style="display: none;">
        <p id="userEmail"></p>
        <button onclick="signOut()">Sign Out</button>
    </div>
</div>
    <div id="googleSignIn" style="margin-top: 20px;">
        <button onclick="signInWithGoogle()">Sign In with Google</button>
    </div>

    <script>
        function signIn() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            firebase.auth().signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // User signed in
                    const user = userCredential.user;
                    console.log(user);
                    checkUser();
                })
                .catch((error) => {
                    // Handle errors
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.error(errorMessage);
                });
        }

        function register() {
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;

            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // User registered successfully
                    const user = userCredential.user;
                    console.log(user);
                    checkUser();
                })
                .catch((error) => {
                    // Handle errors
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.error(errorMessage);
                });
        }

        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(provider)
                .then((result) => {
                    // User signed in with Google
                    const user = result.user;
                    console.log(user);
                    checkUser();
                })
                .catch((error) => {
                    // Handle errors
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.error(errorMessage);
                });
        }

        function checkUser() {
            const user = firebase.auth().currentUser;

            if (user) {
                // User is signed in
                document.getElementById('userEmail').textContent = 'Signed in as: ' + user.email;
                document.getElementById('userInfo').style.display = 'block';
            } else {
                // No user is signed in
                document.getElementById('userInfo').style.display = 'none';
            }
        }

        function signOut() {
            firebase.auth().signOut().then(() => {
                // Sign-out successful
                checkUser();
            }).catch((error) => {
                // An error happened
                console.error(error.message);
            });
        }
    </script>

    <script>
        // Replace with your Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyBm_8PZcsCS6kaaOXejWJCNWop6Pd8lGGU",
            authDomain: "wedding-af156.firebaseapp.com",
            databaseURL: "https://wedding-af156-default-rtdb.firebaseio.com",
            projectId: "wedding-af156",
            storageBucket: "wedding-af156.appspot.com",
            messagingSenderId: "54891412272",
            appId: "1:54891412272:web:114d79cb2a146647e4a6f5"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
    </script>

</body>

</html>
